/* * * * * * * * * *
 *    konami.js    *
 *  Version 0.3.1  *
 *  License:  MIT  *
 * Simon  Waldherr *
 * * * * * * * * * */

var konami={init:function(a){"use strict";konami.db.lastkey=!1,konami.db.string=null!==localStorage.getItem("konamistring")?localStorage.getItem("konamistring"):"",konami.db.kcodes="",konami.db[16]={},konami.db[16].status=!1,konami.db[20]={},konami.db[20].status=!1,addEventListener("keydown",function(a){void 0===konami.db[a.keyCode]&&(konami.db[parseInt(a.keyCode,10)]={}),konami.db[parseInt(a.keyCode,10)].status=!0,konami.db[parseInt(a.keyCode,10)].last=a.timeStamp,konami.db.uc=!konami.db[16].status&&!konami.db[20].status||konami.db[16].status&&konami.db[20].status?!1:!0}),addEventListener("keyup",function(b){var c=konami.db.uc?String.fromCharCode(b.keyCode).toUpperCase():String.fromCharCode(b.keyCode).toLowerCase();c=b.keyCode>31&&b.keyCode<127&&91!==b.keyCode?c:"",void 0===konami.db[b.keyCode]&&(konami.db[parseInt(b.keyCode,10)]={}),konami.db[parseInt(b.keyCode,10)].status=!1,konami.db[parseInt(b.keyCode,10)].last=b.timeStamp,konami.db.lastkey=b.keyCode,8!==b.keyCode?(b.keyCode>36&&b.keyCode<41||(konami.db.string=konami.db.string.substr(-42,42)+c),konami.db.kcodes=konami.db.kcodes.substr(-42,42)+b.keyCode):(konami.db.string=" "+konami.db.string.substr(-42,41)+c,konami.db.kcodes="  "+konami.db.kcodes.substr(-42,40)+b.keyCode),"38384040373937396665"===konami.db.kcodes.substr(-20,20)&&("function"==typeof konami.konamicallback?konami.konamicallback():"function"==typeof a&&a()),konami.db.uc=!konami.db[16].status&&!konami.db[20].status||konami.db[16].status&&konami.db[20].status?!1:!0}),addEventListener("beforeunload",function(){localStorage.setItem("konamistring",konami.db.string)})},get:function(a){"use strict";var b=void 0===konami.db[a.toUpperCase().charCodeAt(0)]?null:konami.db[a.toUpperCase().charCodeAt(0)].status,c=void 0===konami.db[a.toUpperCase().charCodeAt(0)]?null:konami.db[a.toUpperCase().charCodeAt(0)].last;return[b,c]},reg:function(a,b){"use strict";addEventListener("keydown",function(c){var d,e=parseInt(c.keyCode,10),f=!0,g=0;if("string"==typeof a)e=16===e?"shift":18===e?"alt":91===e?"cmd":17===e?"ctrl":37===e?"left":39===e?"right":38===e?"up":40===e?"down":13===e?"return":8===e?"backspace":konami.db.uc?String.fromCharCode(e).toUpperCase():String.fromCharCode(e).toLowerCase();else for(d in a)"string"==typeof a[d]&&("shift"===a[d]?a[d]=16:"alt"===a[d]?a[d]=18:"cmd"===a[d]?a[d]=91:"ctrl"===a[d]?a[d]=17:"left"===a[d]?a[d]=37:"right"===a[d]?a[d]=39:"up"===a[d]?a[d]=38:"down"===a[d]?a[d]=40:"return"===a[d]?a[d]=13:"backspace"===a[d]?a[d]=8:1===a[d].length&&(a[d]=a[d].charCodeAt(0)));if("string"==typeof a)e===a&&b();else{for(g=0;g<a.length;g++)void 0!==konami.db[a[g]]?konami.db[a[g]].status||(f=!1):f=!1;f&&b()}})},db:{}};